# kitty.conf - Kitty Terminal Configuration File of Michael-Matta1 @ https://github.com/Michael-Matta1/dev-dotfiles

# =============================================================================
# Reload config: Ctrl+Shift+F5 | Edit config: Ctrl+Shift+F2

# =============================================================================
# {{{ SHELL
# =============================================================================
shell /usr/bin/zsh
shell_integration enabled

# Keep window open when shell exits to preserve backgrounded processes
close_on_child_death no

# }}}

# =============================================================================
# {{{ FONTS
# =============================================================================
font_family      MesloLGS NF
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        13.0

# Enable ligatures everywhere except at cursor position for better editing experience
disable_ligatures cursor

# OpenType font features for enhanced rendering
font_features MesloLGS-NF-Regular +liga +calt

# Adjust underline rendering for improved visibility
modify_font underline_position 2
modify_font underline_thickness 150%

# Box drawing character thickness scaling: thin, normal, thick, very thick
box_drawing_scale 0.001, 1, 1.5, 2

# Undercurl style for spell checking and LSP diagnostics
undercurl_style thin-sparse

# }}}

# =============================================================================
# {{{ TEXT CURSOR
# =============================================================================
cursor                   #ffdea5
cursor_text_color        #111111
cursor_shape             beam
cursor_shape_unfocused   hollow
cursor_beam_thickness    1.5
cursor_underline_thickness 2.0

# Cursor blink timing in seconds (0=disabled, -1=system default)
cursor_blink_interval    0.6
cursor_stop_blinking_after 15.0

# Cursor trail effect for enhanced visual tracking
cursor_trail                  10
cursor_trail_decay            0.01 0.05
cursor_trail_start_threshold  0

# }}}

# =============================================================================
# {{{ SCROLLBACK
# =============================================================================
scrollback_lines              10000
scrollback_pager_history_size 10
scrollback_fill_enlarged_window yes

# Scrollbar display and appearance settings
scrollbar                     scrolled
scrollbar_interactive         yes
scrollbar_width               0.5
scrollbar_hover_width         1
scrollbar_handle_opacity      0.5
scrollbar_radius              0.3
scrollbar_gap                 0.1

# Mouse wheel scrolling
wheel_scroll_multiplier       5.0
wheel_scroll_min_lines        1
touch_scroll_multiplier       1.0

# }}}

# =============================================================================
# {{{ MOUSE
# =============================================================================
mouse_hide_wait           3.0
mouse_wheel_control       yes
focus_follows_mouse       no
default_pointer_shape     beam
pointer_shape_when_grabbed arrow

# URL detection and visual styling
detect_urls               yes
url_color                 #0087bd
url_style                 curly
open_url_with             default
show_hyperlink_targets    no
underline_hyperlinks      hover
allow_hyperlinks          yes


# Selection behavior
copy_on_select            no
strip_trailing_spaces     smart
select_by_word_characters @-./_~?&=%+#

# Paste safety
paste_actions quote-urls-at-prompt,confirm

# Middle-click copy selection
mouse_map middle press ungrabbed copy_to_clipboard
mouse_map middle release ungrabbed no_op

# Middle-click past from primary selection
# mouse_map middle release ungrabbed paste_from_selection

# }}}

# =============================================================================
# {{{ PERFORMANCE
# =============================================================================
# Screen update delay in milliseconds (lower values increase FPS and CPU usage)
repaint_delay             10

# Input processing delay in milliseconds (lower values improve responsiveness)
input_delay               2

# Synchronize rendering to monitor refresh rate to prevent screen tearing
sync_to_monitor           yes

# }}}

# =============================================================================
# {{{ TERMINAL BELL
# =============================================================================
enable_audio_bell         no
visual_bell_duration      0.0
visual_bell_color         #4444aa
window_alert_on_bell      yes
bell_on_tab               "üîî "

# }}}

# =============================================================================
# {{{ WINDOW LAYOUT
# =============================================================================
remember_window_size      yes
remember_window_position  yes

# Available layouts: tall, fat, grid, horizontal, vertical, splits, stack
enabled_layouts           tall, splits, stack, grid, *

# Window border configuration
window_border_width       1pt
draw_minimal_borders      yes
active_border_color       #0d73cc
inactive_border_color     #444444
bell_border_color         #ff5a00

# Window margins and padding in points
window_margin_width       2
window_padding_width      0
single_window_margin_width  0
single_window_padding_width 0

# Reduce opacity of inactive windows to highlight active window
inactive_text_alpha       0.9

# Confirm before closing windows with running processes (-1=ignore shell prompts)
confirm_os_window_close   -1

# Character set for visual window selection mode
visual_window_select_characters 1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ

# Content placement strategy when window size does not align with cell grid
placement_strategy        center

# }}}

# =============================================================================
# {{{ TAB BAR
# =============================================================================
tab_bar_edge              bottom
tab_bar_style             powerline
tab_powerline_style       slanted
tab_bar_min_tabs          2
tab_bar_align             left
tab_switch_strategy       previous

# Tab color scheme
active_tab_foreground     #ffffff
active_tab_background     #4444aa
active_tab_font_style     bold
inactive_tab_foreground   #888888
inactive_tab_background   #222222
inactive_tab_font_style   normal

# Tab title format: displays index and title
tab_title_template        "{index}: {title}"
tab_title_max_length      25
tab_activity_symbol       ‚óè

# Fade effect intensity levels (applies when using fade tab bar style)
tab_fade                  0.25 0.5 0.75 1

# }}}

# =============================================================================
# {{{ COLORS & APPEARANCE
# =============================================================================
# Background image configuration
background_image          <path_to_your_kitty_background_image>
background_image_layout   scaled
background_image_linear   no

# Background transparency level (0.0=fully transparent, 1.0=fully opaque)
background_opacity        0.1
background_tint           0.98
dynamic_background_opacity yes

# Color scheme
color_scheme Tomorrow Night

# Text selection colors (leave unset to use reverse video)
# selection_foreground    #000000
# selection_background    #fffacd

# Opacity level for dim/faint text
dim_opacity               0.5

# BEGIN_KITTY_THEME
# Theme customization (uncomment and specify theme file as needed)
# include current-theme.conf
# END_KITTY_THEME

# }}}

# =============================================================================
# {{{ ADVANCED
# =============================================================================
# Clipboard security settings
clipboard_control write-clipboard write-primary read-clipboard-ask read-primary-ask
clipboard_max_size 512

# Remote control access (options: no/yes/socket/socket-only/password)
allow_remote_control      no

# Update check interval in hours (0=disabled)
update_check_interval     24

# Terminal type identification
term                      xterm-kitty

# Desktop notifications for long-running command completion (requires shell_integration)
notify_on_cmd_finish      unfocused 10.0 notify

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - OVERVIEW
# =============================================================================
# KEYBINDING PRIORITY (highest ‚Üí lowest):
#   1. zsh-edit-select.plugin.zsh - Text selection, copy/cut/paste in ZLE
#   2. .zshrc - Shell-specific bindings (navigation, autosuggestions, fzf)
#   3. kitty.conf - Terminal emulator bindings (this file, lowest priority)
#
# CONFLICT AVOIDANCE STRATEGY:
#   - Keys bound in zsh layers are passed through with no_op or send_text
#   - Kitty-specific actions use kitty_mod (Ctrl+Shift) prefix
#   - Common shell editing keys (Ctrl+W, Ctrl+A, etc.) are NOT intercepted
#
# COOPERATIVE BINDINGS (kitty sends sequences that zsh expects):
#   - Shift+Enter ‚Üí .zshrc autosuggest-execute (sends \x1b[13;2u)
#   - Ctrl+C ‚Üí zsh-edit-select copy-region (sends \x1b[67;6u CSI u sequence)
#
# PASSED THROUGH TO ZSH (no_op in kitty):
#   - Ctrl+V ‚Üí zsh-edit-select paste-clipboard
#   - Ctrl+X ‚Üí zsh-edit-select cut-region
#   - Ctrl+A ‚Üí zsh-edit-select select-all
#   - Shift+Arrow keys ‚Üí zsh-edit-select selection navigation
#   - Tab/Shift+Tab ‚Üí zsh completion menu navigation
#
# REMAPPED TO AVOID CONFLICTS:
#   - Ctrl+W ‚Üí kitty_mod+w (was close_window, conflicts with backward-kill-word)
#   - Ctrl+S ‚Üí kitty_mod+s (was launch, conflicts with flow control XOFF)
#   - Ctrl+T ‚Üí kitty_mod+t (was new_tab, conflicts with transpose-chars)
# =============================================================================

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - GENERAL
# =============================================================================
# Primary modifier key for kitty-specific shortcuts
kitty_mod ctrl+shift

# -----------------------------------------------------------------------------
# ZSH-EDIT-SELECT INTEGRATION
# -----------------------------------------------------------------------------
# These no_op mappings pass keystrokes to zsh for handling by:
#   - zsh-edit-select.plugin.zsh (Shift+Arrow selection navigation)
#   - zsh completion system (Tab/Shift+Tab menu navigation)
# Keybinding priority: zsh-edit-select.plugin.zsh > .zshrc > kitty.conf
#
# Shift+Arrow keys: Reserved for zsh-edit-select text selection
# (bound to edit-select::backward-char, forward-char, etc.)
map shift+left       no_op
map shift+right      no_op
map shift+up         no_op
map shift+down       no_op
map shift+home       no_op
map shift+end        no_op

# Ctrl+Shift+Arrow keys: Used by zsh-edit-select for word-wise selection
# (bound to edit-select::backward-word, forward-word)
map ctrl+shift+left  no_op
map ctrl+shift+right no_op
map ctrl+shift+home  no_op
map ctrl+shift+end   no_op

# Tab completion: Pass through to zsh for completion menu navigation
# Shift+Tab triggers reverse-menu-complete in zsh (^[[Z)
map tab              no_op
map shift+tab        no_op

# -----------------------------------------------------------------------------
# ZSH-AUTOSUGGESTIONS INTEGRATION
# -----------------------------------------------------------------------------
# Shift+Enter: Sends CSI u sequence to execute autosuggestions
# Coordinates with zsh configuration: bindkey "^\[\[13;2u" autosuggest-execute
# Enables accepting and executing autosuggestions in a single keystroke
map shift+enter send_text all \x1b[13;2u

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - CLIPBOARD
# =============================================================================
# -----------------------------------------------------------------------------
# ZSH-EDIT-SELECT CLIPBOARD INTEGRATION
# -----------------------------------------------------------------------------
# These bindings integrate with zsh-edit-select.plugin.zsh:
#   - Ctrl+C (^[[67;6u) ‚Üí edit-select::copy-region
#   - Ctrl+X ‚Üí edit-select::cut-region
#   - Ctrl+V ‚Üí edit-select::paste-clipboard
#   - Ctrl+A ‚Üí edit-select::select-all
# Keybinding priority: zsh-edit-select.plugin.zsh > .zshrc > kitty.conf
#
# Ctrl+C: Sends CSI u sequence for copy operation in zsh line editor
# Transmits \x1b[67;6u which zsh-edit-select binds to edit-select::copy-region
# Enables text copying in ZLE context instead of sending interrupt signal
map ctrl+c            send_text all \x1b[67;6u

# Ctrl+Shift+C: Sends interrupt signal (SIGINT)
# Remapped to preserve Ctrl+C for copy functionality
map ctrl+shift+c      send_text all \x03

# Ctrl+V: Reserved for zsh-edit-select paste operation
# Passes through to zsh for selection-aware clipboard pasting
# Do not override with paste_from_clipboard to maintain zsh integration
map ctrl+v            no_op

# Ctrl+X: Reserved for zsh-edit-select cut operation
# Bound to edit-select::cut-region in zsh-edit-select.plugin.zsh
map ctrl+x            no_op

# Ctrl+A: Reserved for zsh-edit-select select-all operation
# Bound to edit-select::select-all in zsh-edit-select.plugin.zsh
map ctrl+a            no_op

# Alternative clipboard operations using kitty modifier
# Direct kitty clipboard access that bypasses zsh-edit-select
# Useful when zsh context is unavailable or integration bypass is needed
# map kitty_mod+c       copy_to_clipboard
# map kitty_mod+v       paste_from_clipboard

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - FONT SIZE
# =============================================================================
# Font size adjustment (Ctrl+=/- do not conflict with zsh line editor)
map ctrl+equal        change_font_size all +2.0
map ctrl+plus         change_font_size all +2.0
map ctrl+kp_add       change_font_size all +2.0
map ctrl+minus        change_font_size all -2.0
map ctrl+kp_subtract  change_font_size all -2.0

# Reset font size to default
map ctrl+0            change_font_size all 0

# Alternative font reset using kitty modifier to avoid potential conflicts
# map kitty_mod+0       change_font_size all 0

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - WINDOWS
# =============================================================================
map ctrl+shift+enter  new_window

# Create new split pane in current directory
# Adapts to current window layout configuration
map ctrl+s            launch --location=split --cwd=current

# Close current window
map ctrl+w            close_window

# Close current tab
map ctrl+shift+w      close_tab
map kitty_mod+[       previous_window
map kitty_mod+f       move_window_forward
map kitty_mod+b       move_window_backward
map kitty_mod+r       start_resizing_window
map kitty_mod+f7      focus_visible_window
map kitty_mod+f8      swap_with_window

# Direct window focus by position
map kitty_mod+1       first_window
map kitty_mod+2       second_window
map kitty_mod+3       third_window
map kitty_mod+4       fourth_window
map kitty_mod+5       fifth_window
map kitty_mod+6       sixth_window
map kitty_mod+7       seventh_window
map kitty_mod+8       eighth_window
map kitty_mod+9       ninth_window

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - TABS
# =============================================================================
# Create new tab
map ctrl+n            new_tab

# Create new window
map ctrl+t            new_window

# Create new tab (alternative binding)
map ctrl+shift+t      new_tab
map ctrl+shift+w      close_tab

# Tab navigation note: kitty_mod+left/right are not bound to avoid conflicts
# These key combinations would interfere with zsh-edit-select word selection
# Use Alt+1-9 for direct tab navigation instead (see below)

map kitty_mod+.       move_tab_forward
map kitty_mod+,       move_tab_backward
map kitty_mod+alt+t   set_tab_title

# Direct tab navigation by position
map alt+1             goto_tab 1
map alt+2             goto_tab 2
map alt+3             goto_tab 3
map alt+4             goto_tab 4
map alt+5             goto_tab 5
map alt+6             goto_tab 6
map alt+7             goto_tab 7
map alt+8             goto_tab 8
map alt+9             goto_tab 9

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - LAYOUTS
# =============================================================================
map kitty_mod+l       next_layout

# Toggle stack layout (does not conflict with zsh zoxide binding Alt+Z)
map kitty_mod+z       toggle_layout stack

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - SCROLLING
# =============================================================================
map kitty_mod+up      scroll_line_up
map kitty_mod+k       scroll_line_up
map kitty_mod+down    scroll_line_down
map kitty_mod+j       scroll_line_down
map kitty_mod+page_up   scroll_page_up
map kitty_mod+page_down scroll_page_down
map kitty_mod+home    scroll_home
map kitty_mod+end     scroll_end

# Navigate between shell prompts (requires shell_integration)
map kitty_mod+p       scroll_to_prompt -1
map kitty_mod+n       scroll_to_prompt 1

# Scrollback buffer viewing
map kitty_mod+h       show_scrollback
map kitty_mod+g       show_last_command_output

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - HINTS & SELECTION
# =============================================================================
# Keyboard-driven URL opening
map kitty_mod+e       open_url_with_hints

# Hint-based selection and insertion for various text types
map kitty_mod+p>f     kitten hints --type path --program -
map kitty_mod+p>l     kitten hints --type line --program -
map kitty_mod+p>w     kitten hints --type word --program -
map kitty_mod+p>h     kitten hints --type hash --program -
map kitty_mod+p>n     kitten hints --type linenum

# }}}

# =============================================================================
# {{{ KEYBOARD SHORTCUTS - MISCELLANEOUS
# =============================================================================
# Display mode toggles
map kitty_mod+f11     toggle_fullscreen
map kitty_mod+f10     toggle_maximized

# Unicode character input
map kitty_mod+u       kitten unicode_input

# Configuration file management
map kitty_mod+f2      edit_config_file
map kitty_mod+f5      load_config_file

# Configuration debugging
map kitty_mod+f6      debug_config

# Terminal screen clearing with reset
map kitty_mod+delete  clear_terminal reset active

# Background opacity controls
map kitty_mod+a>m     set_background_opacity +0.1
map kitty_mod+a>l     set_background_opacity -0.1
map kitty_mod+a>1     set_background_opacity 1
map kitty_mod+a>d     set_background_opacity default

# Interactive kitty shell for remote control
map kitty_mod+escape  kitty_shell window

# }}}

# =============================================================================
# {{{ INCLUDE LOCAL OVERRIDES
# =============================================================================
# Machine-specific or private configuration overrides
# globinclude kitty.d/**/*.conf

# }}}
